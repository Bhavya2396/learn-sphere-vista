<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mijbil the Otter - Interactive English Lesson</title>
    <link rel="stylesheet" href="css/styles.css">
    <meta name="description" content="Interactive English lesson based on 'Mijbil the Otter' by Gavin Maxwell">
</head>
<body>
    <!-- Navigation -->
    <nav class="nav-menu" role="navigation" aria-label="Main navigation">
        <div class="nav-items">
            <button class="nav-item active" onclick="showModule('intro')" aria-pressed="true">📚 Introduction</button>
            <button class="nav-item" onclick="showModule('prereading')" aria-pressed="false">📝 Let's Begin</button>
            <button class="nav-item" onclick="showModule('story')" aria-pressed="false">📖 The Story</button>
            <button class="nav-item" onclick="showModule('poem')" aria-pressed="false">🎭 The Poem</button>
            <button class="nav-item" onclick="showModule('thinking-text')" aria-pressed="false">❓ Reading Comprehension</button>
            <button class="nav-item" onclick="showModule('thinking-language')" aria-pressed="false">🔤 Vocabulary & Grammar</button>
        </div>
    </nav>

    <!-- Audio Control -->
    <div class="audio-control">
        <button id="audioBtn" class="audio-btn" onclick="toggleAudio()" aria-label="Toggle audio narration">🔊</button>
    </div>

    <!-- Achievement Popup -->
    <div id="achievementPopup" class="achievement-popup" aria-live="polite">
        <div class="achievement-title">🏆 Achievement Unlocked!</div>
        <div class="achievement-desc" id="achievementDesc">You've completed a module!</div>
    </div>

    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1 class="title">📚 Mijbil the Otter</h1>
            <p class="subtitle">First Flight - Class X</p>
            <p class="reprint">Reprint 2025-26</p>
        </header>

        <!-- Progress Tracker -->
        <div class="progress-container">
            <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                <div class="progress-fill" id="progressBar">0%</div>
            </div>
            <div class="progress-stats">
                <span>📖 Modules: <span id="modulesComplete">0</span>/6</span>
                <span>⭐ Score: <span id="totalScore">0</span></span>
                <span>⏱️ Time: <span id="timeSpent">0:00</span></span>
            </div>
        </div>

        <!-- Introduction Module -->
        <div class="module active" id="intro">
            <div class="exercise-card">
                <h2 class="exercise-title">
                    <span class="exercise-icon">🌟</span>
                    Welcome to "Mijbil the Otter"
                </h2>
                <div class="content-block">
                    <p>This story takes us on a journey with author Gavin Maxwell and his pet otter, Mijbil. It's a heartwarming tale about the bond between humans and animals, and the adventures they experience together.</p>
                    <p>In this interactive lesson, we'll explore Maxwell's relationship with his otter, the challenges of traveling with a wild animal, and the joy and humor that comes from such an unusual pet.</p>
                </div>
                <div class="button-container">
                    <button class="interactive-btn" onclick="startJourney()" aria-label="Begin the lesson">
                        🚀 Start Your Learning Journey
                    </button>
                </div>
            </div>
        </div>

        <!-- Let's Begin Module -->
        <div class="module" id="prereading">
            <div class="exercise-card">
                <h2 class="exercise-title">
                    <span class="exercise-icon">📝</span>
                    Let's Begin
                </h2>
                <div class="content-block">
                    <p>Gavin Maxwell lives in a cottage in Camusfearna, in the West Highlands in Scotland. When his dog Jonnie died, Maxwell was too sad to think of keeping a dog again. But life without a pet was lonely... Read what happened then, in Maxwell's own words.</p>
                    <p>Before we read about Maxwell's experience with his pet otter, let's think about the responsibilities of pet ownership and what it means to care for an animal properly.</p>
                </div>
                
                <h3 class="activity-title">Pre-Reading Activity: Pet Care</h3>
                <div class="content-block">
                    <p>The Society for the Prevention of Cruelty to Animals (SPCA) provides guidelines about how to care for a pet. Owning a pet is a lifetime commitment (up to ten years or more if you own a dog or a cat) involving considerable responsibility. The decision to acquire one, therefore, should be made by the whole family.</p>
                    <p>Without full agreement by everyone, the pet could end up unwanted. Puppies and kittens are so adorable, it is easy to understand why adults and children alike would be attracted to them. Unfortunately, their cute looks are often a disadvantage, because people purchase them without consideration and the knowledge on how to take proper care of them.</p>
                    <p>In pairs, discuss three things that are essential for taking good care of a pet.</p>
                </div>
                
                <div class="reflection-exercise">
                    <textarea id="reflectionText" rows="5" placeholder="Write your reflection here..."></textarea>
                    <button class="interactive-btn" onclick="saveReflection()">
                        Save Reflection
                    </button>
                    <div id="reflectionFeedback" class="feedback-message" aria-live="polite"></div>
                </div>
            </div>
        </div>

        <!-- Story Module -->
        <div class="module" id="story">
            <div class="story-reader">
                <h2 class="section-title">MIJBIL THE OTTER</h2>
                
                <div class="story-controls">
                    <button class="reading-mode-btn" onclick="toggleReadAloud()" aria-label="Read the text aloud">
                        🔊 Read Aloud
                    </button>
                    <button class="reading-mode-btn" onclick="highlightVocabulary()" aria-label="Highlight vocabulary words">
                        ✨ Highlight Vocabulary
                    </button>
                    <button class="reading-mode-btn" onclick="togglePrintMode()" aria-label="Toggle print-friendly mode">
                        🖨️ Print Mode
                    </button>
                </div>
                
                <div class="story-content" id="storyContent">
                    <!-- Story content will be loaded dynamically via JavaScript -->
                </div>
            </div>
        </div>

        <!-- Poem Module -->
        <div class="module" id="poem">
            <div class="story-reader">
                <h2 class="section-title">FOG</h2>
                
                <div class="story-controls">
                    <button class="reading-mode-btn" onclick="readPoemAloud()" aria-label="Read the poem aloud">
                        🔊 Read Aloud
                    </button>
                    <button class="reading-mode-btn" onclick="highlightPoemVocabulary()" aria-label="Highlight vocabulary words">
                        ✨ Highlight Vocabulary
                    </button>
                    <button class="reading-mode-btn" onclick="togglePrintMode()" aria-label="Toggle print-friendly mode">
                        🖨️ Print Mode
                    </button>
                </div>
                
                <div class="poem-content" id="poemContent">
                    <!-- Poem content will be loaded dynamically via JavaScript -->
                </div>
            </div>
        </div>

        <!-- Reading Comprehension Module -->
        <div class="module" id="thinking-text">
            <div class="exercise-card">
                <h2 class="exercise-title">
                    <span class="exercise-icon">❓</span>
                    Reading Comprehension Questions
                </h2>
                
                <div class="story-navigation">
                    <button class="story-nav-btn active" onclick="showQuestionSet('story-questions')" aria-pressed="true">Story Questions</button>
                    <button class="story-nav-btn" onclick="showQuestionSet('poem-questions')" aria-pressed="false">Poem Questions</button>
                </div>
                
                <div id="textQuestions" class="question-section">
                    <!-- Questions will be loaded dynamically -->
                </div>
            </div>
        </div>

        <!-- Vocabulary & Grammar Module -->
        <div class="module" id="thinking-language">
            <div class="exercise-card">
                <h2 class="exercise-title">
                    <span class="exercise-icon">🔍</span>
                    Describing a Repeated Action in the Past
                </h2>
                <div class="content-block">
                    <p>To talk about something that happened regularly in the past, but does not happen any longer, we use would or used to. Both would and used to can describe repeated actions in the past.</p>
                    <p>For example: "Mij would follow me without a lead and come to me when I called his name."</p>
                </div>
                
                <div class="vocabulary-exercise">
                    <h3>Complete the following sentences using would or used to:</h3>
                    <div class="vocab-question">
                        <p>1. Emperor Akbar <select id="vocab1">
                            <option value="">Select</option>
                            <option value="would">would</option>
                            <option value="used to">used to</option>
                        </select> be fond of musical evenings.</p>
                    </div>
                    <div class="vocab-question">
                        <p>2. Every evening we <select id="vocab2">
                            <option value="">Select</option>
                            <option value="would">would</option>
                            <option value="used to">used to</option>
                        </select> take long walks on the beach.</p>
                    </div>
                    <div class="vocab-question">
                        <p>3. Fifty years ago, very few people <select id="vocab3">
                            <option value="">Select</option>
                            <option value="would">would</option>
                            <option value="used to">used to</option>
                        </select> own cars.</p>
                    </div>
                    <div class="vocab-question">
                        <p>4. Till the 1980s, Shanghai <select id="vocab4">
                            <option value="">Select</option>
                            <option value="would">would</option>
                            <option value="used to">used to</option>
                        </select> have very dirty streets.</p>
                    </div>
                    <div class="vocab-question">
                        <p>5. My uncle <select id="vocab5">
                            <option value="">Select</option>
                            <option value="would">would</option>
                            <option value="used to">used to</option>
                        </select> spend his holidays by the sea.</p>
                    </div>
                    <button class="interactive-btn" onclick="checkVocabulary()">Check Answers</button>
                    <div id="vocabFeedback" class="feedback-message" aria-live="polite"></div>
                </div>
            </div>

            <div class="exercise-card">
                <h2 class="exercise-title">
                    <span class="exercise-icon">📚</span>
                    Noun Modifiers
                </h2>
                <div class="content-block">
                    <p>To describe or give more information about a noun (or to modify a noun), we use adjectives or adjectival phrases. For example: "An eminently suitable spot" or "His wide, flat belly".</p>
                    <p>Nouns can also be used as modifiers, like in "The dinner party" or "A designer dress".</p>
                </div>
                
                <div class="matching-game">
                    <h3>Match the words on the left with a word on the right:</h3>
                    
                    <div class="contraction-item">
                        <p>1. a portion of <input type="text" class="contraction-input" data-answer="blood"></p>
                    </div>
                    <div class="contraction-item">
                        <p>2. a pool of <input type="text" class="contraction-input" data-answer="water"></p>
                    </div>
                    <div class="contraction-item">
                        <p>3. flakes of <input type="text" class="contraction-input" data-answer="snow"></p>
                    </div>
                    <div class="contraction-item">
                        <p>4. a huge heap of <input type="text" class="contraction-input" data-answer="stones"></p>
                    </div>
                    <div class="contraction-item">
                        <p>5. a gust of <input type="text" class="contraction-input" data-answer="wind"></p>
                    </div>
                    
                    <button class="interactive-btn" onclick="checkConditionals()">Check Answers</button>
                    <div id="conditionalssFeedback" class="feedback-message" aria-live="polite"></div>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 Interactive English Lesson - Mijbil the Otter</p>
    </footer>

    <script src="js/main.js"></script>
    <script src="js/mijbil-the-otter-story.js"></script>
    <script src="js/questions.js"></script>
    <script src="js/activities.js"></script>
</body>
</html>
